[gd_scene load_steps=13 format=3 uid="uid://c8xqj5kvmyxrf"]

[ext_resource type="Script" uid="uid://crluh2jxfkkv4" path="res://city/CityGenerator.gd" id="1_generator"]
[ext_resource type="Script" uid="uid://dg28ig0ty1t3a" path="res://ui/LoadingScreen.gd" id="1_tegu2"]
[ext_resource type="Script" uid="uid://dvu3f10fe6r2" path="res://systems/PeopleManager.gd" id="1_yage8"]
[ext_resource type="PackedScene" uid="uid://ctktauacq45qg" path="res://free_cam.tscn" id="3_ao2hm"]
[ext_resource type="Script" uid="uid://348dsywt03wg" path="res://ui/PerformanceDebug.gd" id="5_lcptw"]
[ext_resource type="Script" uid="uid://5vjnpmiwnolm" path="res://city/VisibilityManager.gd" id="5_yage8"]
[ext_resource type="Script" uid="uid://tpanuk0qx6yu" path="res://city/BuildingLODManager.gd" id="6_05jo7"]
[ext_resource type="Script" uid="uid://inwuan5ora6n" path="res://city/BuildingImpostorGenerator.gd" id="7_nix7l"]
[ext_resource type="Script" uid="uid://7xu3fgcqlm5x" path="res://city/LODIntegration.gd" id="8_nix7l"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_sky"]
sky_top_color = Color(0.2, 0.3, 0.5, 1)
sky_horizon_color = Color(0.5, 0.55, 0.6, 1)
ground_bottom_color = Color(0.1, 0.1, 0.15, 1)
ground_horizon_color = Color(0.3, 0.35, 0.4, 1)

[sub_resource type="Sky" id="Sky_main"]
sky_material = SubResource("ProceduralSkyMaterial_sky")

[sub_resource type="Environment" id="Environment_main"]
background_mode = 2
sky = SubResource("Sky_main")
ambient_light_source = 2
ambient_light_color = Color(0.4, 0.45, 0.5, 1)
ambient_light_energy = 0.35
fog_enabled = true
fog_light_color = Color(0.53502804, 0.40771616, 0.2974955, 1)
fog_density = 0.0005
fog_aerial_perspective = 1.0
fog_depth_curve = 1.0352657
fog_depth_begin = 591.4
fog_depth_end = 1045.5
volumetric_fog_enabled = true
volumetric_fog_density = 0.0016
volumetric_fog_albedo = Color(0.33533785, 0.84833395, 0.9312275, 1)
volumetric_fog_emission = Color(0.20505151, 0.17763427, 0.12100499, 1)
volumetric_fog_emission_energy = 2.0
volumetric_fog_length = 2500.0

[node name="CityTest" type="Node3D"]

[node name="LoadingScreen" type="CanvasLayer" parent="."]
script = ExtResource("1_tegu2")

[node name="F3 debug" type="CanvasLayer" parent="."]
script = ExtResource("5_lcptw")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.86601907, -0.25000688, 0.43302146, 0, 0.8660238, 0.50000274, -0.500011, -0.4330119, 0.7499931, 0, 1000, 0)
light_energy = 1.2
shadow_enabled = true
directional_shadow_max_distance = 10000.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_main")

[node name="FreeCam" parent="." instance=ExtResource("3_ao2hm")]
transform = Transform3D(1, 0, 0, 0, 0.9658184, 0.25921968, 0, -0.25921968, 0.9658184, 0, 250, 0)

[node name="CityGenerator" type="Node3D" parent="."]
script = ExtResource("1_generator")
building_max_depth = 7
building_branch_chance = 0.1
building_max_total = 2520
top_seed_probability = 0.1
bottom_seed_probability = 0.1
bottom_seed_sizes = 4
edge_top_sizes = 1

[node name="PeopleManager" type="Node" parent="."]
script = ExtResource("1_yage8")
spritesheet_path = null
sprite_width = null
sprite_height = null
sprite_count = null
walk_speed_min = null
walk_speed_max = null
walk_duration_min = null
walk_duration_max = null
wait_duration_min = null
wait_duration_max = null
pool_size = null
pool_growth_size = null
warm_pool_on_start = null
spawn_interval = null
auto_spawn = null
spawns_per_frame = null
spawn_queue_enabled = null
spawn_with_destination_chance = null
in_a_hurry_chance = null
hurry_time = null
min_fare_distance = null
group_spawn_chance = null
default_group_size = null
bob_rate_base = null
bob_rate_variance = null
bob_hurry_multiplier = null
bob_height = null
color_sets_folder = null
process_distance = null
process_check_interval = null
verbose_logging = null

[node name="VisibilityManager" type="Node" parent="."]
script = ExtResource("5_yage8")
max_visibility_distance = 2000.0

[node name="LODManager" type="Node" parent="VisibilityManager"]
script = ExtResource("6_05jo7")
impostor_distance = 1500.0

[node name="ImpostorGenerator" type="Node" parent="VisibilityManager"]
script = ExtResource("7_nix7l")
sprite_size = 64
render_scale = 0.5

[node name="LODIntegration" type="Node" parent="VisibilityManager"]
script = ExtResource("8_nix7l")
city_generator_path = NodePath("../../CityGenerator")
impostor_generator_path = NodePath("../ImpostorGenerator")
lod_manager_path = NodePath("../LODManager")
