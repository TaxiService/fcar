[gd_scene load_steps=31 format=3 uid="uid://dek4efddws8mr"]

[ext_resource type="Texture2D" uid="uid://b8dhd5iqbef0" path="res://icon.svg" id="1_et1pl"]
[ext_resource type="Script" uid="uid://c7m1dsqpdck13" path="res://FCar.gd" id="1_fr0kx"]
[ext_resource type="Script" uid="uid://313aqakyo1m1" path="res://Camera3D.gd" id="1_ptugb"]
[ext_resource type="Material" uid="uid://cc37tlrahc1tj" path="res://yellow.tres" id="4_lquwl"]
[ext_resource type="Material" uid="uid://ce3eavktn35d4" path="res://grey.tres" id="5_7mycd"]
[ext_resource type="Script" uid="uid://dvu3f10fe6r2" path="res://PeopleManager.gd" id="6_people"]
[ext_resource type="Script" uid="uid://c72sj768vn5do" path="res://SpawnSurface.gd" id="7_spawn"]

[sub_resource type="BoxShape3D" id="BoxShape3D_5patm"]
size = Vector3(200, 1, 200)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1kyes"]
albedo_color = Color(0.243137, 0.27451, 0.235294, 1)
albedo_texture = ExtResource("1_et1pl")

[sub_resource type="BoxMesh" id="BoxMesh_t3vcl"]
material = SubResource("StandardMaterial3D_1kyes")
size = Vector3(200, 1, 200)

[sub_resource type="BoxShape3D" id="BoxShape3D_5dwv6"]
size = Vector3(30, 5, 30)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_c3qcp"]
albedo_color = Color(0.160784, 0.184314, 0.156863, 1)

[sub_resource type="BoxMesh" id="BoxMesh_nrjh1"]
material = SubResource("StandardMaterial3D_c3qcp")
size = Vector3(30, 5, 30)

[sub_resource type="BoxShape3D" id="BoxShape3D_n53hl"]
size = Vector3(50, 500, 50)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uwb37"]
albedo_color = Color(0.270588, 0.258824, 0.278431, 1)
metallic = 0.17
metallic_specular = 0.3
roughness = 0.5

[sub_resource type="BoxMesh" id="BoxMesh_h3x72"]
material = SubResource("StandardMaterial3D_uwb37")
size = Vector3(50, 500, 50)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_elbkq"]
friction = 0.5
bounce = 0.5
absorbent = true

[sub_resource type="BoxShape3D" id="BoxShape3D_eaf57"]
size = Vector3(1, 0.8, 2)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_1juei"]
points = PackedVector3Array(0.5, 0, 1, -0.5, 0, 1, -0.3, -0.2, 0.6, 0.3, -0.2, 0.6, 0.3, -0.2, -0.6, 0.5, 0, -1, -0.5, 0, -1, -0.3, -0.2, -0.6)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_h2yge"]
radial_segments = 5
rings = 3

[sub_resource type="SphereMesh" id="SphereMesh_h2yge"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1bvp3"]
albedo_color = Color(0.41960785, 0.9529412, 1, 1)
metallic = 0.3
metallic_specular = 0.44

[sub_resource type="CapsuleMesh" id="CapsuleMesh_feaec"]
radial_segments = 7
rings = 1

[sub_resource type="BoxMesh" id="BoxMesh_h2yge"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7mycd"]
albedo_color = Color(0.17716414, 0.17716414, 0.12428273, 1)

[sub_resource type="BoxMesh" id="BoxMesh_272bh"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5vw27"]
albedo_color = Color(1.8566039, 4.415934, 0.18679522, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_h2yge"]
material = ExtResource("4_lquwl")
top_radius = 0.295
bottom_radius = 0.495
height = 0.2

[sub_resource type="CylinderMesh" id="CylinderMesh_1bvp3"]
material = ExtResource("4_lquwl")
top_radius = 0.125
bottom_radius = 0.235
height = 0.185

[sub_resource type="CylinderMesh" id="CylinderMesh_lquwl"]
material = ExtResource("5_7mycd")
top_radius = 0.09
bottom_radius = 0.06
height = 0.25
radial_segments = 6

[node name="Main" type="Node"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.707107, 0.5, -0.5, 0, 0.707107, 0.707107, 0.707107, -0.5, 0.5, 0, 5, 0)
shadow_enabled = true

[node name="Node" type="Node" parent="."]

[node name="Floor" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Floor"]
shape = SubResource("BoxShape3D_5patm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0013418198, -0.019368052, -0.01874566)
mesh = SubResource("BoxMesh_t3vcl")

[node name="Floor2" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -175.014, 137.891, -290.983)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Floor2"]
shape = SubResource("BoxShape3D_5patm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Floor2"]
mesh = SubResource("BoxMesh_t3vcl")

[node name="FloorSmall" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 91.3062, 134.082, -66.3163)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="FloorSmall2" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -304.477, -114.207, 69.8457)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall2"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall2"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="FloorSmall3" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -304.477, -50.6923, 69.8457)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall3"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall3"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="FloorSmall4" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -304.477, 11.4628, 69.8457)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall4"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall4"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="FloorSmall5" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 28.7957, 141.394, 213.274)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall5"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall5"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="FloorSmall6" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -59.3615, 0.285419, -5.43698)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/FloorSmall6"]
shape = SubResource("BoxShape3D_5dwv6")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/FloorSmall6"]
mesh = SubResource("BoxMesh_nrjh1")

[node name="Building" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 91.4877, -1, -94.9681)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building2" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -193.447, -1, -236.438)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building2"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building2"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building3" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -196.105, -1.00003, -339.651)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building3"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building3"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building4" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -290.105, -1.00003, -118.651)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building4"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building4"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building5" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -336.765, -1.00003, 93.0381)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building5"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building5"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building6" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.974731, -1.00003, 218.924)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building6"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building6"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Building7" type="StaticBody3D" parent="Node"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 100.593, -1.00003, 198.575)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Node/Building7"]
shape = SubResource("BoxShape3D_n53hl")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Node/Building7"]
mesh = SubResource("BoxMesh_h3x72")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.9961948, 0.08715568, 0, -0.08715568, 0.9961948, -2.2765515, 2.07618, 7.6534176)
script = ExtResource("1_ptugb")
target = NodePath("../FCar")

[node name="FCar" type="RigidBody3D" parent="."]
mass = 5000.0
physics_material_override = SubResource("PhysicsMaterial_elbkq")
gravity_scale = 2.0
center_of_mass_mode = 1
center_of_mass = Vector3(0, -0.3, -0.1)
can_sleep = false
continuous_cd = true
contact_monitor = true
max_contacts_reported = 10
linear_damp = 1.0
angular_damp = 1.0
script = ExtResource("1_fr0kx")
hover_thrust = 3.0
heightlock_thrust = 5.0
roll_differential = 0.5
booster_default_thigh_angle = -60.0
debug_thrusters = true
com_compensation_enabled = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="FCar"]
shape = SubResource("BoxShape3D_eaf57")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.4, 0)
shape = SubResource("ConvexPolygonShape3D_1juei")

[node name="MeshInstance3D" type="MeshInstance3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0)
mesh = SubResource("CapsuleMesh_h2yge")
surface_material_override/0 = ExtResource("4_lquwl")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="FCar"]
transform = Transform3D(2.5373334e-05, -0.0062358533, -0.6879197, -0.67026913, -0.48751736, 0.003224503, -0.51182514, 0.6384361, -0.0042568073, 0, 0.07722026, -0.68935686)
mesh = SubResource("SphereMesh_h2yge")
skeleton = NodePath("../MeshInstance3D")
surface_material_override/0 = SubResource("StandardMaterial3D_1bvp3")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="FCar"]
transform = Transform3D(1.00635, 0, 0, 0, -4.3225e-08, -0.670446, 0, 0.988872, -2.93061e-08, 0, -0.336463, 0)
mesh = SubResource("CapsuleMesh_feaec")
surface_material_override/0 = ExtResource("5_7mycd")

[node name="WheelFrontLeft" type="Marker3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0.1, -1)

[node name="WheelFrontRight" type="Marker3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0.1, -1)

[node name="WheelBackLeft" type="Marker3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0.1, 1)

[node name="WheelBackRight" type="Marker3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 0.1, 1)

[node name="statuslights" type="Node3D" parent="FCar"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.99301744)

[node name="autohover" type="MeshInstance3D" parent="FCar/statuslights"]
transform = Transform3D(0.21165748, 0, 0, 0, 0.042190384, 0.018301047, 0, -0.024047405, 0.032108586, 0, -0.30908442, -0.042146683)
mesh = SubResource("BoxMesh_h2yge")
surface_material_override/0 = SubResource("StandardMaterial3D_7mycd")

[node name="heightlock" type="Node3D" parent="FCar/statuslights"]

[node name="+2" type="MeshInstance3D" parent="FCar/statuslights/heightlock"]
transform = Transform3D(0.22272772, 0, 0, 0, 0.025750296, 0, 0, 0, 0.2940546, 0, 0.15930629, -0.13936377)
mesh = SubResource("BoxMesh_272bh")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_7mycd")

[node name="+1" type="MeshInstance3D" parent="FCar/statuslights/heightlock"]
transform = Transform3D(0.30593187, 0, 0, 0, 0.025750296, 0, 0, 0, 0.2940546, 0, 0.09539145, -0.13936377)
mesh = SubResource("BoxMesh_272bh")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_7mycd")

[node name="0" type="MeshInstance3D" parent="FCar/statuslights/heightlock"]
transform = Transform3D(0.3829149, 0, 0, 0, 0.025750296, 0, 0, 0, 0.2940546, 0, 0.039858878, -0.13936377)
mesh = SubResource("BoxMesh_272bh")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_5vw27")

[node name="-1" type="MeshInstance3D" parent="FCar/statuslights/heightlock"]
transform = Transform3D(0.30593187, 0, 0, 0, 0.025750296, 0, 0, 0, 0.2940546, 0, -0.017243862, -0.13936377)
mesh = SubResource("BoxMesh_272bh")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_7mycd")

[node name="-2" type="MeshInstance3D" parent="FCar/statuslights/heightlock"]
transform = Transform3D(0.22272772, 0, 0, 0, 0.025750296, 0, 0, 0, 0.2940546, 0, -0.080904245, -0.13936377)
mesh = SubResource("BoxMesh_272bh")
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_7mycd")

[node name="booster-R" type="Node3D" parent="FCar"]
transform = Transform3D(0.35836798, 0.9335804, 0, -0.9335804, 0.35836798, 0, 0, 0, 1, 0.5, 0, 0)

[node name="thigh" type="MeshInstance3D" parent="FCar/booster-R"]
transform = Transform3D(0.64278764, 0, 0.76604444, 0, 1, 0, -0.76604444, 0, 0.64278764, 0, 0, 0)
mesh = SubResource("CylinderMesh_h2yge")

[node name="shin" type="MeshInstance3D" parent="FCar/booster-R/thigh"]
transform = Transform3D(0.81915206, 0, -0.57357645, 0, 1, 0, 0.57357645, 0, 0.81915206, 0, 0.02184683, 0.25598168)
mesh = SubResource("CylinderMesh_1bvp3")
skeleton = NodePath("../..")

[node name="exhaust" type="MeshInstance3D" parent="FCar/booster-R/thigh/shin"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, -0.021846801, 0.23164213)
mesh = SubResource("CylinderMesh_lquwl")

[node name="booster-L" type="Node3D" parent="FCar"]
transform = Transform3D(0.35836798, -0.9335804, 0, 0.9335804, 0.35836798, 0, 0, 0, 1, -0.5, 0, 0)

[node name="thigh" type="MeshInstance3D" parent="FCar/booster-L"]
transform = Transform3D(0.64278764, 0, -0.76604444, 0, 1, 0, 0.76604444, 0, 0.64278764, 0, 0, 0)
mesh = SubResource("CylinderMesh_h2yge")

[node name="shin" type="MeshInstance3D" parent="FCar/booster-L/thigh"]
transform = Transform3D(0.81915206, 0, 0.57357645, 0, 1, 0, -0.57357645, 0, 0.81915206, 0, 0.02184683, 0.25598168)
mesh = SubResource("CylinderMesh_1bvp3")
skeleton = NodePath("../..")

[node name="exhaust" type="MeshInstance3D" parent="FCar/booster-L/thigh/shin"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, -0.021846801, 0.23164213)
mesh = SubResource("CylinderMesh_lquwl")

[node name="PeopleManager" type="Node" parent="."]
script = ExtResource("6_people")
spritesheet_path = "res://people2.png"

[node name="SpawnSurface" type="Node3D" parent="."]
script = ExtResource("7_spawn")
enabled = true
max_people = 50
bounds_size = Vector3(50, 0, 50)
